<form id="form">
  <input type="text" id="nombre" placeholder="Nombre" required><br><br>
  <input type="email" id="correo" placeholder="Correo" required><br><br>
  <textarea id="mensaje" placeholder="Mensaje"></textarea><br><br>
  <button type="submit">Enviar</button>
</form>

<p id="estado"></p>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyVe_ozsdCei4gVV_oltZqhHL-ccjK98GhwDd0tl2u5zt8rXt0aV6xmoJuUPywiahGi/exec";

document.getElementById("form").addEventListener("submit", async (e) => {
  e.preventDefault();
  const data = {
    nombre: document.getElementById("nombre").value,
    correo: document.getElementById("correo").value,
    mensaje: document.getElementById("mensaje").value
  };

  try {
    const response = await fetch(WEB_APP_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
      mode: "cors"
    });

    const result = await response.text(); // HtmlService devuelve texto
    document.getElementById("estado").innerText = result.includes("✅") ? "✅ Enviado correctamente" : "❌ Error al enviar";

  } catch (err) {
    document.getElementById("estado").innerText = "❌ Error al enviar: " + err.message;
  }
});
</script>

